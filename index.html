<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema Lei de Ohm - IF</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#dff5e4;
}

.container{
    max-width:800px;
    margin:auto;
    padding:30px;
}

.card{
    background:white;
    padding:25px;
    border-radius:15px;
    box-shadow:0 10px 30px rgba(0,0,0,0.2);
}

h1{
    text-align:center;
    color:#1b7f3a;
}

button, input{
    width:100%;
    padding:12px;
    margin:8px 0;
    font-size:16px;
    border-radius:8px;
    border:1px solid #ccc;
}

button{
    background:#1b7f3a;
    color:white;
    font-weight:bold;
    cursor:pointer;
}

button:hover{
    background:#145c2a;
}

.tela{ display:none; }
.ativa{ display:block; }

.registro{
    border:1px solid #ccc;
    padding:10px;
    margin:10px 0;
    border-radius:8px;
    background:#fafafa;
}

.filtroBtn{
    margin-top:5px;
}
</style>
</head>
<body>

<div class="container">
<div class="card">

<!-- TELA INICIAL -->
<div id="inicio" class="tela ativa">
    <h1>Sistema Lei de Ohm</h1>
    <button onclick="mostrarTela('loginProfessor')">Professor</button>
    <button onclick="mostrarTela('loginAluno')">Aluno</button>
</div>

<!-- LOGIN PROFESSOR -->
<div id="loginProfessor" class="tela">
    <h1>Área do Professor</h1>
    <input type="password" id="senhaProfessor" placeholder="Digite a senha">
    <button onclick="entrarProfessor()">Entrar</button>
    <button onclick="voltar()">Voltar</button>
</div>

<!-- LOGIN ALUNO -->
<div id="loginAluno" class="tela">
    <h1>Área do Aluno</h1>
    <input type="text" id="nomeAluno" placeholder="Digite seu nome">
    <button onclick="entrarAluno()">Entrar</button>
    <button onclick="voltar()">Voltar</button>
</div>

<!-- ESCOLHA DO ALUNO -->
<div id="escolhaAluno" class="tela">
    <h1>O que deseja calcular?</h1>
    <button onclick="abrirCalculo('U')">Tensão (U)</button>
    <button onclick="abrirCalculo('I')">Corrente (I)</button>
    <button onclick="abrirCalculo('R')">Resistência (R)</button>
    <button onclick="voltar()">Sair</button>
</div>

<!-- ÁREA DE CÁLCULO DO ALUNO -->
<div id="areaAluno" class="tela">
    <h1 id="tituloCalculo"></h1>

    <input type="number" id="valor1" placeholder="Primeiro valor">
    <input type="number" id="valor2" placeholder="Segundo valor">

    <input type="number" id="respostaAluno" placeholder="Digite sua resposta">

    <button onclick="salvarCalculo()">Salvar Resposta</button>
    <button onclick="mostrarTela('escolhaAluno')">Voltar</button>
</div>

<!-- ÁREA PROFESSOR -->
<div id="areaProfessor" class="tela">
    <h1>Registros dos Alunos</h1>

    <button onclick="mostrarRegistros('U')">Ver Tensão</button>
    <button onclick="mostrarRegistros('I')">Ver Corrente</button>
    <button onclick="mostrarRegistros('R')">Ver Resistência</button>

    <div id="listaRegistros"></div>

    <button onclick="voltar()">Sair</button>
</div>

</div>
</div>

<script>

let alunoAtual = "";
let tipoAtual = "";

/* NAVEGAÇÃO */
function mostrarTela(id){
    document.querySelectorAll(".tela").forEach(t=>t.classList.remove("ativa"));
    document.getElementById(id).classList.add("ativa");
}

function voltar(){
    mostrarTela("inicio");
}

/* LOGIN */
function entrarProfessor(){
    let senha = document.getElementById("senhaProfessor").value;
    if(senha === "eletroif"){
        mostrarTela("areaProfessor");
    }else{
        alert("Senha incorreta!");
    }
}

function entrarAluno(){
    let nome = document.getElementById("nomeAluno").value.trim();
    if(nome === ""){
        alert("Digite seu nome!");
        return;
    }
    alunoAtual = nome;
    mostrarTela("escolhaAluno");
}

/* ESCOLHA DO ALUNO */
function abrirCalculo(tipo){
    tipoAtual = tipo;

    if(tipo === "U"){
        document.getElementById("tituloCalculo").innerText = "Calcular Tensão (U = R × I)";
    }
    if(tipo === "I"){
        document.getElementById("tituloCalculo").innerText = "Calcular Corrente (I = U / R)";
    }
    if(tipo === "R"){
        document.getElementById("tituloCalculo").innerText = "Calcular Resistência (R = U / I)";
    }

    mostrarTela("areaAluno");
}

/* SALVAR */
function salvarCalculo(){

    let v1 = Number(document.getElementById("valor1").value);
    let v2 = Number(document.getElementById("valor2").value);
    let respostaAluno = Number(document.getElementById("respostaAluno").value);

    if(!v1 || !v2 || !respostaAluno){
        alert("Preencha todos os campos!");
        return;
    }

    let respostaCorreta;

    if(tipoAtual === "U") respostaCorreta = v1 * v2;
    if(tipoAtual === "I") respostaCorreta = v1 / v2;
    if(tipoAtual === "R") respostaCorreta = v1 / v2;

    let registro = {
        nome: alunoAtual,
        tipo: tipoAtual,
        valor1: v1,
        valor2: v2,
        respostaAluno: respostaAluno,
        respostaCorreta: respostaCorreta
    };

    let registros = JSON.parse(localStorage.getItem("registros")) || [];
    registros.push(registro);
    localStorage.setItem("registros", JSON.stringify(registros));

    alert("Resposta salva com sucesso!");
}

/* PROFESSOR */
function mostrarRegistros(tipo){

    let registros = JSON.parse(localStorage.getItem("registros")) || [];
    let lista = document.getElementById("listaRegistros");
    lista.innerHTML = "";

    registros.forEach((r, index)=>{

        if(r.tipo === tipo){

            let acertou = (r.respostaAluno === r.respostaCorreta);

            lista.innerHTML += `
                <div class="registro">
                    <strong>Aluno:</strong> ${r.nome}<br>
                    <strong>Valores:</strong> ${r.valor1}, ${r.valor2}<br>
                    <strong>Resposta do Aluno:</strong> ${r.respostaAluno}<br>
                    <strong>Resposta Correta:</strong> ${r.respostaCorreta}<br>
                    <strong>Status:</strong> ${acertou ? "✔ Correto" : "✖ Incorreto"}<br>
                    <button class="filtroBtn" onclick="excluirRegistro(${index})">Excluir</button>
                </div>
            `;
        }

    });

    lista.innerHTML += `
        <button style="background:#a30000;margin-top:10px;"
        onclick="limparTipo('${tipo}')">Limpar Todos</button>
    `;
}

function excluirRegistro(index){
    let registros = JSON.parse(localStorage.getItem("registros")) || [];
    registros.splice(index,1);
    localStorage.setItem("registros", JSON.stringify(registros));
    alert("Registro excluído!");
    mostrarTela("areaProfessor");
}

function limparTipo(tipo){
    let registros = JSON.parse(localStorage.getItem("registros")) || [];
    registros = registros.filter(r=>r.tipo !== tipo);
    localStorage.setItem("registros", JSON.stringify(registros));
    alert("Registros removidos!");
    mostrarTela("areaProfessor");
}

</script>

</body>
</html>
