<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema Lei de Ohm - IF</title>

<style>

@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

*{
    box-sizing:border-box;
}

body{
    margin:0;
    font-family:'Poppins', sans-serif;
    background:linear-gradient(135deg,#0f5132,#198754,#20c997);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
}

.container{
    width:100%;
    max-width:900px;
    padding:20px;
}

.card{
    background:rgba(255,255,255,0.15);
    backdrop-filter:blur(15px);
    border-radius:20px;
    padding:40px;
    box-shadow:0 20px 50px rgba(0,0,0,0.25);
    border:1px solid rgba(255,255,255,0.2);
    animation:fadeIn 0.6s ease-in-out;
}

@keyframes fadeIn{
    from{opacity:0; transform:translateY(20px);}
    to{opacity:1; transform:translateY(0);}
}

h1{
    text-align:center;
    color:white;
    font-weight:700;
    margin-bottom:25px;
    letter-spacing:1px;
}

button, input{
    width:100%;
    padding:14px;
    margin:10px 0;
    font-size:15px;
    border-radius:12px;
    border:none;
    outline:none;
    transition:0.3s;
}

input{
    background:rgba(255,255,255,0.9);
    font-weight:500;
}

input:focus{
    transform:scale(1.02);
    box-shadow:0 0 0 3px rgba(25,135,84,0.3);
}

button{
    background:linear-gradient(135deg,#198754,#157347);
    color:white;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 8px 20px rgba(0,0,0,0.2);
}

button:hover{
    transform:translateY(-3px);
    box-shadow:0 12px 25px rgba(0,0,0,0.3);
}

button:active{
    transform:scale(0.97);
}

.tela{ display:none; }
.ativa{ display:block; }

.registro{
    background:white;
    padding:18px;
    margin:15px 0;
    border-radius:15px;
    box-shadow:0 10px 25px rgba(0,0,0,0.15);
    font-size:14px;
    line-height:1.6;
    transition:0.3s;
}

.registro:hover{
    transform:translateY(-3px);
}

.registro strong{
    color:#198754;
}

.registro button{
    margin-top:8px;
}

.status-ok{
    color:#198754;
    font-weight:600;
}

.status-erro{
    color:#dc3545;
    font-weight:600;
}

@media(max-width:600px){
    .card{
        padding:25px;
    }
}

</style>
</head>
<body>

<div class="container">
<div class="card">

<!-- TELA INICIAL -->
<div id="inicio" class="tela ativa">
    <h1>âš¡ Sistema Lei de Ohm</h1>
    <button onclick="mostrarTela('loginProfessor')">ğŸ‘¨â€ğŸ« Ãrea do Professor</button>
    <button onclick="mostrarTela('loginGrupo')">ğŸ‘¥ Ãrea do Grupo</button>
</div>

<!-- LOGIN PROFESSOR -->
<div id="loginProfessor" class="tela">
    <h1>ğŸ‘¨â€ğŸ« Professor</h1>
    <input type="password" id="senhaProfessor" placeholder="Digite a senha">
    <button onclick="entrarProfessor()">Entrar</button>
    <button onclick="mostrarTela('inicio')">Voltar</button>
</div>

<!-- MENU PROFESSOR -->
<div id="menuProfessor" class="tela">
    <h1>ğŸ“Š Escolher Tipo</h1>
    <button onclick="mostrarRegistros('U')">Ver TensÃ£o (U)</button>
    <button onclick="mostrarRegistros('I')">Ver Corrente (I)</button>
    <button onclick="mostrarRegistros('R')">Ver ResistÃªncia (R)</button>
    <button onclick="mostrarTela('loginProfessor')">Voltar</button>
</div>

<!-- LISTA PROFESSOR -->
<div id="listaProfessor" class="tela">
    <h1>ğŸ“‹ Registros</h1>
    <div id="listaRegistros"></div>
    <button onclick="mostrarTela('menuProfessor')">Voltar</button>
</div>

<!-- LOGIN GRUPO -->
<div id="loginGrupo" class="tela">
    <h1>ğŸ‘¥ Grupo</h1>
    <input type="text" id="nomeGrupo" placeholder="Nome do Grupo">
    <input type="password" id="senhaGrupo" placeholder="Senha do Grupo">
    <button onclick="entrarGrupo()">Entrar</button>
    <button onclick="mostrarTela('inicio')">Voltar</button>
</div>

<!-- ESCOLHA GRUPO -->
<div id="escolhaGrupo" class="tela">
    <h1>ğŸ”¢ O que deseja calcular?</h1>
    <button onclick="abrirCalculo('U')">TensÃ£o (U)</button>
    <button onclick="abrirCalculo('I')">Corrente (I)</button>
    <button onclick="abrirCalculo('R')">ResistÃªncia (R)</button>
    <button onclick="mostrarResultadosGrupo()">Ver Minhas Notas</button>
    <button onclick="mostrarTela('loginGrupo')">Voltar</button>
</div>

<!-- ÃREA CÃLCULO -->
<div id="areaGrupo" class="tela">
    <h1 id="tituloCalculo"></h1>
    <input type="number" id="valor1" placeholder="Primeiro valor">
    <input type="number" id="valor2" placeholder="Segundo valor">
    <input type="number" id="respostaGrupo" placeholder="Digite sua resposta">
    <button onclick="salvarCalculo()">Salvar Resposta</button>
    <button onclick="mostrarTela('escolhaGrupo')">Voltar</button>
</div>

<!-- RESULTADOS DO GRUPO -->
<div id="resultadoGrupo" class="tela">
    <h1>ğŸ“ˆ Minhas Notas</h1>
    <div id="listaGrupo"></div>
    <button onclick="mostrarTela('escolhaGrupo')">Voltar</button>
</div>

</div>
</div>

<script>

/* ğŸ”½ AQUI ESTÃ SUA LÃ“GICA ORIGINAL INTACTA ğŸ”½ */

let grupoAtual = "";
let tipoAtual = "";

function mostrarTela(id){
    document.querySelectorAll(".tela").forEach(t=>t.classList.remove("ativa"));
    document.getElementById(id).classList.add("ativa");
}

function entrarProfessor(){
    if(document.getElementById("senhaProfessor").value === "eletroif"){
        mostrarTela("menuProfessor");
    } else {
        alert("Senha incorreta!");
    }
}

function entrarGrupo(){
    let nome = document.getElementById("nomeGrupo").value.trim();
    let senha = document.getElementById("senhaGrupo").value;

    if(nome === "" || senha === ""){
        alert("Preencha todos os campos!");
        return;
    }

    let grupos = JSON.parse(localStorage.getItem("grupos")) || {};

    if(!grupos[nome]){
        grupos[nome] = senha;
        localStorage.setItem("grupos", JSON.stringify(grupos));
    } else {
        if(grupos[nome] !== senha){
            alert("Senha incorreta!");
            return;
        }
    }

    grupoAtual = nome;
    mostrarTela("escolhaGrupo");
}

function abrirCalculo(tipo){
    tipoAtual = tipo;

    const titulos = {
        U: "Calcular TensÃ£o (U = R Ã— I)",
        I: "Calcular Corrente (I = U / R)",
        R: "Calcular ResistÃªncia (R = U / I)"
    };

    document.getElementById("tituloCalculo").innerText = titulos[tipo];
    mostrarTela("areaGrupo");
}

function salvarCalculo(){

    const v1 = Number(document.getElementById("valor1").value);
    const v2 = Number(document.getElementById("valor2").value);
    const resposta = Number(document.getElementById("respostaGrupo").value);

    if(isNaN(v1) || isNaN(v2) || isNaN(resposta)){
        alert("Preencha corretamente!");
        return;
    }

    let correta;
    if(tipoAtual === "U") correta = v1 * v2;
    if(tipoAtual === "I") correta = v1 / v2;
    if(tipoAtual === "R") correta = v1 / v2;

    let registros = JSON.parse(localStorage.getItem("registros")) || [];

    registros.push({
        grupo: grupoAtual,
        tipo: tipoAtual,
        valor1: v1,
        valor2: v2,
        respostaGrupo: resposta,
        respostaCorreta: correta,
        divulgado: false
    });

    localStorage.setItem("registros", JSON.stringify(registros));
    alert("Resposta enviada!");
}

function mostrarRegistros(tipo){

    let registros = JSON.parse(localStorage.getItem("registros")) || [];
    let lista = document.getElementById("listaRegistros");
    lista.innerHTML = "";

    registros.forEach((r,index)=>{
        if(r.tipo === tipo){

            let acertou = r.respostaGrupo === r.respostaCorreta;

            lista.innerHTML += `
            <div class="registro">
                <strong>Grupo:</strong> ${r.grupo}<br>
                <strong>Valores:</strong> ${r.valor1}, ${r.valor2}<br>
                <strong>Resposta do Grupo:</strong> ${r.respostaGrupo}<br>
                <strong>Resposta Correta:</strong> ${r.respostaCorreta}<br>
                <strong>Status:</strong> <span class="${acertou ? 'status-ok':'status-erro'}">
                ${acertou ? "âœ” Acertou" : "âœ– Errou"}
                </span><br>

                <button onclick="divulgarIndividual(${index})">ğŸ“¢ Divulgar Nota</button>
                <button onclick="apagarRegistro(${index})" style="background:#dc3545">
                ğŸ—‘ Apagar
                </button>

                ${r.divulgado ? "<strong style='color:green'>Nota jÃ¡ divulgada</strong>" : ""}
            </div>`;
        }
    });

    mostrarTela("listaProfessor");
}

function divulgarIndividual(index){
    let registros = JSON.parse(localStorage.getItem("registros")) || [];
    registros[index].divulgado = true;
    localStorage.setItem("registros", JSON.stringify(registros));
    alert("Nota divulgada individualmente!");
    mostrarRegistros(registros[index].tipo);
}

function apagarRegistro(index){
    let registros = JSON.parse(localStorage.getItem("registros")) || [];
    registros.splice(index,1);
    localStorage.setItem("registros", JSON.stringify(registros));
    alert("Registro apagado!");
    mostrarTela("menuProfessor");
}

function mostrarResultadosGrupo(){

    let registros = JSON.parse(localStorage.getItem("registros")) || [];
    let lista = document.getElementById("listaGrupo");
    lista.innerHTML = "";

    registros.forEach(r=>{
        if(r.grupo === grupoAtual && r.divulgado){
            let acertou = r.respostaGrupo === r.respostaCorreta;
            lista.innerHTML += `
            <div class="registro">
                <strong>Tipo:</strong> ${r.tipo}<br>
                <strong>Sua resposta:</strong> ${r.respostaGrupo}<br>
                <strong>Correta:</strong> ${r.respostaCorreta}<br>
                <strong>Status:</strong> <span class="${acertou ? 'status-ok':'status-erro'}">
                ${acertou ? "âœ” Correto" : "âœ– Incorreto"}
                </span>
            </div>`;
        }
    });

    mostrarTela("resultadoGrupo");
}

</script>

</body>
</html>
